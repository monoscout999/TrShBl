[
    {
        "name": "Backend",
        "prompt": "Generate ONLY Python Flask code. Code: from flask import Flask, render_template; app = Flask(__name__, static_folder='static', template_folder='templates'); @app.route('/'); def index(): return render_template('index.html'); if __name__ == '__main__': app.run(port=5000, debug=True)",
        "output": "tests/quantum-synth-v2/app.py"
    },
    {
        "name": "HTML Structure (Contract)",
        "prompt": "Generate ONLY HTML5 for a pro-synth HUD. 3 canvases. UI Controls: #start, #gain-val, #density-val, #speed-val, #preset. Use Flexbox layout for panels. Code: <!DOCTYPE html><html lang='en'><head><meta charset='UTF-8'><title>Quantum Synth V4</title><link rel='stylesheet' href='/static/style.css'><script src='https://cdnjs.cloudflare.com/ajax/libs/tone/14.8.49/Tone.js'></script><script src='https://cdn.jsdelivr.net/npm/d3-delaunay@6'></script><link href='https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&display=swap' rel='stylesheet'></head><body><canvas id='bg-canvas'></canvas><canvas id='particle-canvas'></canvas><canvas id='ui-canvas'></canvas><div class='crt-overlay'></div><div class='hud'><div class='panel top-left'><h2>AUDIO ENGINE</h2><button id='start'>ACTIVATE LINK</button><div class='row'><label>GAIN</label><input type='range' id='gain-slider' min='-60' max='0' value='-12'></div></div><div class='panel top-right'><h2>QUANTUM DECODING</h2><div class='row'><label>DENSITY</label><input type='range' id='density-slider' min='100' max='1000' value='500'></div><div class='row'><label>SPEED</label><input type='range' id='speed-slider' min='0' max='100' value='50'></div></div><div class='panel bottom-left'><h2>SPECTRAL DATA</h2><canvas id='spectrogram-canvas'></canvas></div><div class='panel bottom-right'><h2>PRESET SELECT</h2><select id='preset-select'><option>PLASMA</option><option>ELECTRON</option><option>QUARK</option></select></div></div><script type='module' src='/static/js/main.js'></script></body></html>",
        "output": "tests/quantum-synth-v2/templates/index.html"
    },
    {
        "name": "CSS Aesthetics (Contract)",
        "prompt": "Generate ONLY CSS for a high-end HUD. Use Flexbox for .hud panels in corners. Glassmorphism effect. Glowing inputs. Code: body,html{margin:0;padding:0;background:#000;color:#0ff;font-family:'Orbitron',sans-serif;height:100vh;overflow:hidden}canvas{position:fixed;top:0;left:0;width:100%;height:100%}.hud{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;flex-direction:column;justify-content:space-between;padding:30px;box-sizing:border-box;pointer-events:none}.panel{background:rgba(0,10,20,0.85);backdrop-filter:blur(15px);border:1px solid #0ff3;padding:20px;border-radius:10px;pointer-events:auto;box-shadow:0 0 20px #0ff2}.row{margin-top:15px;display:flex;align-items:center;gap:10px}button{background:transparent;border:1px solid #0ff;color:#0ff;padding:10px;cursor:pointer;width:100%;font-family:inherit;transition:0.3s}button:hover{background:#0ff;color:#000}input[type=range]{flex-grow:1;accent-color:#0ff}#spectrogram-canvas{width:240px;height:60px;background:#0008;border:1px solid #0ff2}.crt-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:linear-gradient(rgba(18,16,16,0) 50%,rgba(0,0,0,0.1) 50%),linear-gradient(90deg,rgba(255,0,0,0.01),rgba(0,255,0,0.005),rgba(0,0,255,0.01));background-size:100% 2px,3px 100%;pointer-events:none;z-index:100}",
        "output": "tests/quantum-synth-v2/static/style.css"
    },
    {
        "name": "Audio Engine (Contract)",
        "prompt": "Generate ONLY JS code. Export class AudioEngine. Contract: start(), setGain(db), update() returns {freqs, bass, mid, high, level}. Use Tone.js Filter and split bands properly. Code: export class AudioEngine{constructor(){this.fft=new Tone.Analyser('fft',1024);this.meter=new Tone.Meter();this.gainNode=new Tone.Gain(-12).toDestination();this.osc=new Tone.Oscillator('C2','sawtooth').connect(this.gainNode);this.gainNode.connect(this.fft);this.gainNode.connect(this.meter);this.active=false}async start(){await Tone.start();this.osc.start();this.active=true}setGain(db){this.gainNode.gain.rampTo(Tone.dbToGain(db),0.1)}update(){if(!this.active)return null;const f=this.fft.getValue();return {freqs:f,bass:Math.abs(f[5])*2,mid:Math.abs(f[50])*2,high:Math.abs(f[200])*2,level:this.meter.getValue()}}}",
        "output": "tests/quantum-synth-v2/static/js/audio_engine.js"
    },
    {
        "name": "Particle System (Contract)",
        "prompt": "Generate ONLY JS code. Export class ParticleSystem. Contract: draw(mouse, data, settings) implements repulsion physics. F settings: density, speed. Use Friction. Code: export class ParticleSystem{constructor(ctx,count){this.ctx=ctx;this.particles=Array.from({length:count},()=>({x:Math.random()*window.innerWidth,y:Math.random()*window.innerHeight,vx:0,vy:0}))}draw(mouse,data,settings){this.ctx.clearRect(0,0,window.innerWidth,window.innerHeight);this.particles.forEach(p=>{const dx=mouse.x-p.x,dy=mouse.y-p.y,dist=Math.sqrt(dx*dx+dy*dy);if(dist<400){const f=(1-dist/400)*0.03;p.vx+=dx*f;p.vy+=dy*f}if(dist<50){const rep=(1-dist/50)*0.5;p.vx-=dx*rep;p.vy-=dy*rep}p.x+=p.vx*(settings.speed/50);p.y+=p.vy*(settings.speed/50);p.vx*=0.92;p.vy*=0.92;if(p.x<0)p.x=window.innerWidth;if(p.x>window.innerWidth)p.x=0;if(p.y<0)p.y=window.innerHeight;if(p.y>window.innerHeight)p.y=0;this.ctx.fillStyle=`hsla(${200+data.bass*100},100%,70%,0.8)`;this.ctx.beginPath();this.ctx.arc(p.x,p.y,2+data.mid*5,0,Math.PI*2);this.ctx.fill()})}}",
        "output": "tests/quantum-synth-v2/static/js/particle_system.js"
    },
    {
        "name": "Voronoi BG (Contract)",
        "prompt": "Generate ONLY JS code. Export class VoronoiBG. Contract: render(data). Use D3-Delaunay morphing background. Code: export class VoronoiBG{constructor(canvas){this.ctx=canvas.getContext('2d');this.points=Array.from({length:32},()=>[Math.random()*window.innerWidth,Math.random()*window.innerHeight])}render(data){const del=d3.Delaunay.from(this.points),vor=del.voronoi([0,0,window.innerWidth,window.innerHeight]);this.ctx.fillStyle='#000';this.ctx.fillRect(0,0,window.innerWidth,window.innerHeight);this.ctx.strokeStyle=`hsla(180,100%,50%,${0.1+data.bass*0.5})`;this.ctx.lineWidth=2;this.ctx.beginPath();vor.render(this.ctx);this.ctx.stroke();this.points.forEach(p=>{p[0]+=Math.sin(Date.now()*0.001+p[1])*data.bass*5;p[1]+=Math.cos(Date.now()*0.001+p[0])*data.bass*5})}}",
        "output": "tests/quantum-synth-v2/static/js/voronoi_bg.js"
    },
    {
        "name": "UI Controller (Contract)",
        "prompt": "Generate ONLY JS code. Export class UIController. Contract: update(data, settings). UI Canvas for Oscilloscope, Spectrogram Canvas for Bars. Code: export class UIController{constructor(mainC,specC){this.ctx=mainC.getContext('2d');this.sCtx=specC.getContext('2d');this.w=mainC.width;this.h=mainC.height}update(data){if(!data)return;this.ctx.clearRect(0,0,this.w,this.h);this.ctx.strokeStyle='#0f0';this.ctx.beginPath();const step=this.w/128;for(let i=0;i<128;i++){this.ctx.lineTo(i*step,150+data.freqs[i*4]*100)}this.ctx.stroke();this.sCtx.clearRect(0,0,240,60);const bw=240/32;for(let i=0;i<32;i++){const v=Math.abs(data.freqs[i*8])*50;this.sCtx.fillStyle='#0ff';this.sCtx.fillRect(i*bw,60-v,bw-1,v)}}}",
        "output": "tests/quantum-synth-v2/static/js/ui_controller.js"
    },
    {
        "name": "Main Orchestration (Contract)",
        "prompt": "Generate ONLY JS code. Orchestrate all modules. Contract: Handle input from sliders (#gain-slider, #density-slider, #speed-slider) and update Engine State. NO internal logic. Code: import{AudioEngine}from'./audio_engine.js';import{ParticleSystem}from'./particle_system.js';import{VoronoiBG}from'./voronoi_bg.js';import{UIController}from'./ui_controller.js';const cP=document.getElementById('particle-canvas'),cB=document.getElementById('bg-canvas'),cU=document.getElementById('ui-canvas'),cS=document.getElementById('spectrogram-canvas');const state={density:500,speed:50,gain:-12};const resize=()=>{[cP,cB,cU].forEach(c=>{c.width=window.innerWidth;c.height=window.innerHeight})};window.onresize=resize;resize();const audio=new AudioEngine(),particles=new ParticleSystem(cP.getContext('2d'),500),voronoi=new VoronoiBG(cB),ui=new UIController(cU,cS),mouse={x:0,y:0};window.onmousemove=e=>{mouse.x=e.clientX;mouse.y=e.clientY};document.getElementById('start').onclick=async(e)=>{await audio.start();e.target.style.display='none'};document.getElementById('gain-slider').oninput=e=>{state.gain=e.target.value;audio.setGain(state.gain)};document.getElementById('speed-slider').oninput=e=>{state.speed=e.target.value};const loop=()=>{const data=audio.update()||{freqs:new Float32Array(1024).fill(-100),bass:0,mid:0,high:0};voronoi.render(data);particles.draw(mouse,data,state);ui.update(data);requestAnimationFrame(loop)};loop();",
        "output": "tests/quantum-synth-v2/static/js/main.js"
    }
]